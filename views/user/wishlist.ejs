<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from demos.webicode.com/html/Bo-shop-html/shopping-cart.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 19 May 2024 04:38:55 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="M_Adnan">
  <title>Ticker</title>

  <!-- SLIDER REVOLUTION 4.x CSS SETTINGS -->
  <link rel="stylesheet" type="text/css" href="/user/rs-plugin/css/settings.css" media="screen" />

  <!-- Bootstrap Core CSS -->
  <link href="/user/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="/user/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="/user/css/ionicons.min.css" rel="stylesheet">
  <link href="/user/css/main.css" rel="stylesheet">
  <link href="/user/css/style.css" rel="stylesheet">
  <link href="/user/css/responsive.css" rel="stylesheet">
  <link href="/user/font/flaticon.css" rel="stylesheet">

  <!-- JavaScripts -->
  <script src="/user/js/modernizr.js"></script>

  <!-- Online Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Merriweather:300,400,700,900|Poppins:300,400,500,600,700|Montserrat:300,400,500,600,700,800"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.12/dist/sweetalert2.min.css">

  <style>
    .cart-count {
      font-size: 12px;
      position: absolute;
      top: 5px;
      /* Adjust as needed */
      right: -14px;
      /* Adjust as needed */
    }

    li {
      position: relative;
    }

    a {
      position: relative;
    }
  </style>

</head>

<body>

  <!-- LOADER -->
  <div id="loader">
    <div class="position-center-center">
      <div class="ldr"></div>
    </div>
  </div>

  <!-- Wrap -->
  <div id="wrap">

    <!-- TOP Bar -->
    <div class="top-bar">
      <div class="container-full">
        <p><i class="icon-envelope"></i> Info@Tikershop.com </p>
        <p class="call"> <i class="icon-call-in"></i> 001 234 7895 </p>

        <!-- Login Info -->
        <div class="login-info">
          <ul>

            <% if (!userId) { %>
              <li><a href="/login">LOGIN</a></li>
              <% }else{%>
                <li><a href="/user/profile">MY ACCOUNT </a></li>
                <%} %>
                  <li><a href="/wishlist">WISHLIST</a></li>
                  <li><a href="/cart">CART<i class="icon-basket-loaded"></i> <span class="c-no badge badge-warning "
                        style="font-size: 12px;">
                        <%=cartCount %>
                      </span></a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- header -->
    <header>
      <div class="sticky">
        <div class="container-full d-flex justify-content-between">

          <!-- Logo -->
          <div class="logo w-25"> <a href="/"><img class="img-responsive w-25" src="/image/logo.png" alt=""></a> </div>

          <div class="mr-5 pr-5">
            <!-- <form id="searchForm" action=""  class="search-form"> -->

            <div class="input-group flex-nowrap">
              <input id="searchInput" class="input-group__field  w-100  border " type="search" name="search"
                placeholder="Search" aria-label="search">
              <button id="searchButton" class="btn rounded-end px-3 text-nowrap " type="submit"><i
                  class="icon-magnifier "></i></button>
            </div>
            <!-- </form> -->
          </div>

          <nav class="navbar ownmenu navbar-expand-lg   ml-5 pl-5 ">
            <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span></span> </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <div class="collapse navbar-collapse" id="navbarNav">
                <nav class="header__menu mobile-menu">
                  <ul>
                    <li class="active"><a href="/">Home</a></li>
                    <li><a href="/shop">Shop</a></li>
                    <!-- <li><a href="/shop/men">Men</a></li>
                    <li><a href="/shop/women">Women</a></li> -->

                  </ul>
                </nav>

              </div>

            </div>
          </nav>
        </div>
      </div>
      <div class="clearfix"></div>
    </header>


    <!-- Content -->
    <div id="content">

      <!-- SUB BANNER -->
      <section class="sub-bnr" data-stellar-background-ratio="0.5">
        <div class="position-center-center">
          <div class="container">
            <h4>WishList</h4>
            <ol class="breadcrumb">
              <li><a href="/">Home</a></li>
              <li><a href="/shop">Shop</a></li>
              <li class="active">WishList</li>
            </ol>
          </div>
        </div>
      </section>


      <!-- PAGES INNER -->
      <section class="padding-top-100 padding-bottom-100 pages-in chart-page">
        <div class="container">
          <% if(!wishlistData?.wishlistItem.length){%>
            <div class="d-flex align-items-center justify-content-center mb-5 mt-5">
              <div class="">
                <h4 class="fw-bold">WISHLIST IS EMPTY</h4>
                <br>
                <a href="/shop" class="btn btn-primary border">Continue Shop</a>
              </div>

            </div>
            <%}else{%>
              <!-- Payments Steps -->
              <div class="shopping-cart text-center">
                <table class="table">
                  <thead class="thead-dark">
                    <tr>
                      <th scope="col" class="text-left">Items</th>
                      <th scope="col">Name</th>

                      <th scope="col">Add to Cart</th>
                      <th scope="col">Remove</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% wishlistData.wishlistItem.forEach(product=> { %>
                      <tr>
                        <th class="text-left">
                          <!-- Media Image -->
                          <a href="#." class="item-img">
                            <img class="media-object w-75" src="<%= product.productId.image[0] %>" alt="">
                          </a>

                        </th>
                        <td>
                          <!-- Item Name -->
                          <div class="media-body fs-4 mt-4 ">
                            <a href="/product?id=<%=product.productId._id%>">
                              <strong>
                                <%= product.productId.name %>
                              </strong>
                            </a>
                          </div>
                        </td>
                        <td>

                          <% if (product.productId.stock>0) { %>
                            <div class="addtocart ">
                              <button onclick="addToCart('<%= product.productId._id %>')"
                                class="btn  btn-sm rounded-circle"><i class="icon-basket-loaded"></i></button>
                            </div>
                            <% } else if (product.productId.stock===0){ %>
                              <span class="d-block mt-2 text-danger">out of stock</span>

                              <% } %>
                        </td>
                        
                        <td >
                          
                            <i class="icon-close bg-dark text-white rounded-circle p-2"
                            onclick="remove('<%= product?.productId?._id %>')" style="cursor: pointer;"></i>

                         
                        </td>

                      </tr>
                      <% }) %>
                  </tbody>

                </table>
              </div>
              <%} %>
        </div>
      </section>


      <!-- PAGES INNER -->
      <section class="padding-top-100 padding-bottom-100 light-gray-bg shopping-cart small-cart d-flex">
        <div class="container">

          <!-- SHOPPING INFORMATION -->
          <div class="cart-ship-info margin-top-0 ">
            <div class="row">

              <!-- DISCOUNT CODE -->
              <div class="col-sm-7">

                <div class="coupn-btn"> <a href="/shop" class="btn ">continue shopping</a> </div>
              </div>


            </div>
          </div>
        </div>
      </section>




    </div>

    <!-- FOOTER -->
    <footer>
      <div class="container">
        <div class="row">
          <!-- ABOUT Location -->
          <div class="col-md-4">
            <div class="about-footer"> <img class="margin-bottom-30 w-25" src="/image/images.png" alt="">
              <p><i class="icon-pointer"></i> Street No. 12, Newyork 12, <br>
                MD - 123, USA.</p>
              <p><i class="icon-call-end"></i> 1.800.123.456789 <br>
                1.800.123.456789</p>
              <p><i class="icon-envelope"></i> info@TickerShop.com <br>
                contact@Tickershop.com</p>
            </div>
          </div>

          <!-- HELPFUL LINKS -->
          <div class="col-md-5">
            <h6>Links</h6>
            <ul class="link two-half">
              <li><a href="#."> Products</a></li>
              <li><a href="#."> Find a Store</a></li>
              <li><a href="#."> Features</a></li>
              <li><a href="#."> Privacy Policy</a></li>
              <li><a href="#."> Blog</a></li>
              <li><a href="#."> Press Kit </a></li>
              <li><a href="#."> Products</a></li>
              <li><a href="#."> Find a Store</a></li>
              <li><a href="#."> Features</a></li>
              <li><a href="#."> Privacy Policy</a></li>
              <li><a href="#."> Blog</a></li>
              <li><a href="#."> Press Kit </a></li>
            </ul>
          </div>

          <!-- HELPFUL LINKS -->
          <div class="col-md-3">
            <h6>Account Info</h6>
            <ul class="link">
              <li><a href="#."> Products</a></li>
              <li><a href="#."> Find a Store</a></li>
              <li><a href="#."> Features</a></li>
              <li><a href="#."> Privacy Policy</a></li>
              <li><a href="#."> Blog</a></li>
              <li><a href="#."> Press Kit </a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Rights -->
      <div class="rights">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <p>© 2018 BoShop All right reserved. <a href="https://webicode.com/">webicode</a></p>
            </div>
            <div class="col-md-6 text-right"> <img src="images/card-icon.png" alt=""> </div>
          </div>
        </div>
      </div>
    </footer>
  </div>
  <script src="/user/js/jquery-1.12.4.min.js"></script>
  <script src="/user/js/popper.min.js"></script>
  <script src="/user/js/bootstrap.min.js"></script>
  <script src="/user/js/own-menu.js"></script>
  <script src="/user/js/jquery.lighter.js"></script>
  <script src="/user/js/jquery.magnific-popup.min.js"></script>
  <script src="/user/js/owl.carousel.min.js"></script>
  <script src="/user/js/main.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


  <script>
    //search option
    const fetchFilteredProducts = async () => {
      try {

        const searchQuery = document.getElementById('searchInput').value.trim();


        const queryParams = new URLSearchParams({
          search: searchQuery,

        });
        console.log(queryParams)
        console.log("enetered")

        window.location.href = `/shop?${queryParams}`;

      } catch (error) {
        console.error('Error filtered products:', error);
      }
    };

    // Call the fetchFilteredProducts function whenever filter btn clicks 
    document.getElementById('searchButton').addEventListener('click', fetchFilteredProducts)
    //remove product form wishlist 
    async function remove(productId) {

      try {
        const confirmation = await Swal.fire({
          toast: true,
          title: "Are you sure?",
          text: "You won't be able to revert this!",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, delete it!"
        })

        if (confirmation.isConfirmed) {
          const response = await axios.delete('/wishlist/remove', { data: { productId } })
          if (response.data.success) {
            await Swal.fire({
              toast: true,
              position: 'top-end',
              icon: 'success',
              text: response.data.message,
              showConfirmButton: false,
              timer: 2000
            }).then(() => {
              window.location.reload();
            })
          } else {
            await Swal.fire({
              toast: true,
              position: 'top-end',
              icon: 'error',
              text: 'An unexpected error occurred. Please try again later.',
              showConfirmButton: false,
              timer: 2000
            });
          }
        }

      } catch (error) {
        console.log(error.message);
      }
    }

    //add to cart
    async function addToCart(prodId) {

      try {
        const response = await fetch("/wishlist/addCart", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ prodId })
        });
        const data = await response.json();



        if (data.success) {
          await Swal.fire({
            toast: true,
            position: 'top-end',
            icon: 'success',
            title: "Success",
            text: data.message,
            showConfirmButton: false,
            timer: 1000,
            timerProgressBar: true,

          }).then(() => window.location.href = "/cart")

          // window.location.href=`/product?id=${prodId}`
        } else {
          await Swal.fire({
            toast: true,
            position: 'top-end',
            icon: 'error',
            title: 'Error',
            text: data.message,
            showConfirmButton: false,
            timer: 1000,
            timerProgressBar: true,
          });
          //window.location.href=`/product?id=${prodId}`
        }
      } catch (error) {
        console.log("Error occured  " + error)
      }
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.12/dist/sweetalert2.min.js"></script>
</body>

</html>